const CURSOS = [
  {
    id: 1,
    grado: 4,
    paralelo: "A",
    especialidad: 1
  },
  {
    id: 2,
    grado: 4,
    paralelo: "B",
    especialidad: 1
  },
  {
    id: 3,
    grado: 4,
    paralelo: "C",
    especialidad: 1
  },
  {
    id: 4,
    grado: 4,
    paralelo: "D",
    especialidad: 1
  },
  {
    id: 5,
    grado: 4,
    paralelo: "E",
    especialidad: 1
  },
  {
    id: 6,
    grado: 5,
    paralelo: "A",
    especialidad: 1
  },
  {
    id: 7,
    grado: 5,
    paralelo: "B",
    especialidad: 1
  },
  {
    id: 8,
    grado: 5,
    paralelo: "C",
    especialidad: 1
  },
  {
    id: 9,
    grado: 5,
    paralelo: "D",
    especialidad: 1
  },
  {
    id: 10,
    grado: 5,
    paralelo: "E",
    especialidad: 1
  },
  {
    id: 11,
    grado: 6,
    paralelo: "A",
    especialidad: 1
  },
  {
    id: 12,
    grado: 6,
    paralelo: "B",
    especialidad: 1
  },
  {
    id: 13,
    grado: 6,
    paralelo: "C",
    especialidad: 1
  },
  {
    id: 14,
    grado: 6,
    paralelo: "D",
    especialidad: 1
  },
  {
    id: 15,
    grado: 6,
    paralelo: "E",
    especialidad: 1
  },
  {
    id: 16,
    grado: 4,
    paralelo: "A",
    especialidad: 2
  },
  {
    id: 17,
    grado: 4,
    paralelo: "B",
    especialidad: 2
  },
  {
    id: 18,
    grado: 5,
    paralelo: "A",
    especialidad: 2
  },
  {
    id: 67,
    grado: 5,
    paralelo: "B",
    especialidad: 2
  },
  {
    id: 19,
    grado: 6,
    paralelo: "A",
    especialidad: 2
  },
  {
    id: 20,
    grado: 4,
    paralelo: "A",
    especialidad: 3
  },
  {
    id: 21,
    grado: 4,
    paralelo: "B",
    especialidad: 3
  },
  {
    id: 22,
    grado: 4,
    paralelo: "C",
    especialidad: 3
  },
  {
    id: 23,
    grado: 5,
    paralelo: "A",
    especialidad: 3
  },
  {
    id: 24,
    grado: 5,
    paralelo: "B",
    especialidad: 3
  },
  {
    id: 25,
    grado: 5,
    paralelo: "C",
    especialidad: 3
  },
  {
    id: 26,
    grado: 6,
    paralelo: "A",
    especialidad: 3
  },
  {
    id: 27,
    grado: 6,
    paralelo: "B",
    especialidad: 3
  },
  {
    id: 69,
    grado: 6,
    paralelo: "C",
    especialidad: 3
  },
  {
    id: 28,
    grado: 4,
    paralelo: "A",
    especialidad: 4
  },
  {
    id: 29,
    grado: 4,
    paralelo: "B",
    especialidad: 4
  },
  {
    id: 30,
    grado: 5,
    paralelo: "A",
    especialidad: 4
  },
  {
    id: 31,
    grado: 5,
    paralelo: "B",
    especialidad: 4
  },
  {
    id: 32,
    grado: 6,
    paralelo: "A",
    especialidad: 4
  },
  {
    id: 33,
    grado: 6,
    paralelo: "B",
    especialidad: 4
  },
  {
    id: 34,
    grado: 4,
    paralelo: "A",
    especialidad: 5
  },
  {
    id: 35,
    grado: 4,
    paralelo: "B",
    especialidad: 5
  },
  {
    id: 36,
    grado: 4,
    paralelo: "C",
    especialidad: 5
  },
  {
    id: 37,
    grado: 4,
    paralelo: "D",
    especialidad: 5
  },
  {
    id: 38,
    grado: 4,
    paralelo: "E",
    especialidad: 5
  },
  {
    id: 39,
    grado: 5,
    paralelo: "A",
    especialidad: 5
  },
  {
    id: 40,
    grado: 5,
    paralelo: "B",
    especialidad: 5
  },
  {
    id: 41,
    grado: 5,
    paralelo: "C",
    especialidad: 5
  },
  {
    id: 42,
    grado: 5,
    paralelo: "D",
    especialidad: 5
  },
  {
    id: 70,
    grado: 5,
    paralelo: "E",
    especialidad: 5
  },
  {
    id: 43,
    grado: 6,
    paralelo: "A",
    especialidad: 5
  },
  {
    id: 44,
    grado: 6,
    paralelo: "B",
    especialidad: 5
  },
  {
    id: 45,
    grado: 6,
    paralelo: "C",
    especialidad: 5
  },
  {
    id: 46,
    grado: 6,
    paralelo: "D",
    especialidad: 5
  },
  {
    id: 47,
    grado: 4,
    paralelo: "A",
    especialidad: 6
  },
  {
    id: 48,
    grado: 4,
    paralelo: "B",
    especialidad: 6
  },
  {
    id: 49,
    grado: 4,
    paralelo: "C",
    especialidad: 6
  },
  {
    id: 50,
    grado: 4,
    paralelo: "D",
    especialidad: 6
  },
  {
    id: 51,
    grado: 4,
    paralelo: "E",
    especialidad: 6
  },
  {
    id: 52,
    grado: 5,
    paralelo: "A",
    especialidad: 6
  },
  {
    id: 53,
    grado: 5,
    paralelo: "B",
    especialidad: 6
  },
  {
    id: 54,
    grado: 5,
    paralelo: "C",
    especialidad: 6
  },
  {
    id: 55,
    grado: 5,
    paralelo: "D",
    especialidad: 6
  },
  {
    id: 72,
    grado: 5,
    paralelo: "E",
    especialidad: 6
  },
  {
    id: 56,
    grado: 6,
    paralelo: "A",
    especialidad: 6
  },
  {
    id: 57,
    grado: 6,
    paralelo: "B",
    especialidad: 6
  },
  {
    id: 58,
    grado: 6,
    paralelo: "C",
    especialidad: 6
  },
  {
    id: 59,
    grado: 6,
    paralelo: "D",
    especialidad: 6
  },
  {
    id: 60,
    grado: 4,
    paralelo: "A",
    especialidad: 7
  },
  {
    id: 61,
    grado: 4,
    paralelo: "B",
    especialidad: 7
  },
  {
    id: 62,
    grado: 4,
    paralelo: "C",
    especialidad: 7
  },
  {
    id: 63,
    grado: 5,
    paralelo: "A",
    especialidad: 7
  },
  {
    id: 64,
    grado: 5,
    paralelo: "B",
    especialidad: 7
  },
  {
    id: 74,
    grado: 5,
    paralelo: "C",
    especialidad: 7
  },
  {
    id: 65,
    grado: 6,
    paralelo: "A",
    especialidad: 7
  },
  {
    id: 66,
    grado: 6,
    paralelo: "B",
    especialidad: 7
  }
];

document.addEventListener('DOMContentLoaded', () => {
  const inpGrado = document.getElementById('grado');
  const inpParalelo = document.getElementById('paralelo');
  const inpEspecialidad = document.getElementById('especialidad');

  const inpFiliacion = document.getElementById('filiacion');
  const inpDocumentos = document.getElementById('documentos');

  const centralizador = document.getElementById('centralizador');

  const getEspecialidadId = (grado, paralelo, especialidad) => {
    for (let i = 0; i < CURSOS.length; i++) {
      const item = CURSOS[i];
      if (item.grado == grado && item.paralelo == paralelo && item.especialidad == especialidad) {
        return item.id;
      }
    }
    return 1;
  }

  const setChangeValues = (cursoEspecialidadId) => {
    localStorage.setItem('jvrf-especialidad-id', cursoEspecialidadId);
    centralizador.setAttribute('href', `/registro/centralizador/curso/${cursoEspecialidadId}`);

    inpFiliacion.setAttribute('href', `/registro/curso/${cursoEspecialidadId}/filiacion`);
    inpDocumentos.setAttribute('href', `#`);
  }

  inpGrado.addEventListener('change', (evt) => {
    const grado = evt.target.value;
    const paralelo = inpParalelo.value;
    const especialidad = inpEspecialidad.value;

    const cursoEspecialidadId = getEspecialidadId(grado, paralelo, especialidad);
    setChangeValues(cursoEspecialidadId);
  });

  inpParalelo.addEventListener('change', (evt) => {
    const grado = inpGrado.value;
    const paralelo = evt.target.value;
    const especialidad = inpEspecialidad.value;

    const cursoEspecialidadId = getEspecialidadId(grado, paralelo, especialidad);
    setChangeValues(cursoEspecialidadId);
  });

  inpEspecialidad.addEventListener('change', (evt) => {
    const grado = inpGrado.value;
    const paralelo = inpParalelo.value;
    const especialidad = evt.target.value;

    const cursoEspecialidadId = getEspecialidadId(grado, paralelo, especialidad);
    setChangeValues(cursoEspecialidadId);
  });

  const initEspecialidadId = (id) => {
    const cursoParaleloEspecialidad = CURSOS.find(item => item.id == id)
    inpGrado.value = cursoParaleloEspecialidad.grado;
    inpParalelo.value = cursoParaleloEspecialidad.paralelo;
    inpEspecialidad.value = cursoParaleloEspecialidad.especialidad;
  }

  const resetEspecialidadId = () => {
    inpGrado.value = 4;
    inpParalelo.value = 'A';
    inpEspecialidad.value = 1;
    localStorage.setItem('jvrf-especialidad-id', 1);
  }

  const especialidadId = localStorage.getItem('jvrf-especialidad-id') || 1;
  especialidadId == 0 ? resetEspecialidadId() : initEspecialidadId(especialidadId);
  setChangeValues(especialidadId);
});
